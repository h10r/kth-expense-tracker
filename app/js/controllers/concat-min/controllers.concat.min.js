expenseTrackerAppModule.controller("expenseTracker.categoriesController",function(a,b,c,d,e){"use strict";a.currentUser=d.getCurrentUser(),a.categoryColors=c.getAvailableColors(),a.selectedColor=-1,a.goBack=e.goBack,"/settings/categories/add"===b.$$path?(a.currentCategory=c.initNewCategory(),a.availableColors=c.getAvailableColors()):a.categories=c.listCategories(),a.chooseColorForCategory=function(b){a.selectedColor===b&&(b=-1),a.selectedColor=b,c.setCategoryColorById(b)},a.saveCategory=function(){c.saveCurrentCategoryToCollection(),a.goBack()},a.removeCategory=function(){var a,b,d,e=document.getElementsByClassName("triggered-active-modal");e=e[0],d=e.dataset.categoryid,c.removeCategoryFromCollection(d),a=e.getAttribute("href"),b=document.querySelector(a),b.classList.toggle("active")}}),expenseTrackerAppModule.controller("expenseTracker.expensesController",function(a,b,c,d,e,f,g,h,i){"use strict";var j,k;a.categories=g.listCategories(),a.categoryColors=g.getAvailableColors(),"/expenses/add"===b.$$path?(a.currentExpense=f.initNewExpense(),k=new Date,a.currentExpense.date=k.toDateString(),a.currentExpense.time=k.toLocaleTimeString(),a.amount=f.getAmount(),i.initialize($("div.ival"))):-1!==b.$$path.indexOf("/expenses/remove/")?(f.removeExpenseFromCollection(c.id),b.path("/feed")):a.currentExpense=f.getCurrentExpense(),a.amount=f.getAmount(),j=f.getCategory(),a.selectedCategory=g.getCategoryById(j),a.userCurrency=h.getCurrencyById(e.getCurrency()),a.chooseCategory=function(a){void 0===a&&(a=5),f.setCategory(a),b.path("/expenses/add/details")},a.saveExpense=function(){f.addExpenseToCollection(),b.path("/feed")}}),expenseTrackerAppModule.controller("expenseTracker.feedController",function(a,b,c,d,e,f,g){"use strict";if(a.categoryColors=f.getAvailableColors(),a.userCurrency=g.getCurrencyById(d.getCurrency()),a.userBudget=d.getBudget(),a.monthlyTotal=e.getMonthlyTotal(),a.spentBudgetPercentage=function(){return a.userBudget>0?Math.round(a.monthlyTotal/a.userBudget*100):!1}(),a.isOverBudget=function(){return a.spentBudgetPercentage>100?!0:!1}(),-1!==b.$$path.indexOf("/feed/detail/"))a.expense=e.getExpenseById(c.id),a.category=f.getCategoryById(a.expense.category_id),a.categoryColor=f.getCategoryColorById(a.category.color_id);else{a.expenses=e.getExpensesChronologically(),a.expenses_categories=[];for(var h=0;h<a.expenses.length;h++)a.expenses_categories.push({expense:a.expenses[h],category:f.getCategoryById(a.expenses[h].category_id)})}a.openDetailView=function(a){b.path("/feed/detail/"+a)}}),expenseTrackerAppModule.controller("expenseTracker.goalsController",function(a,b,c,d,e,f,g){"use strict";a.currentUser=d.getCurrentUser(),a.userCurrency=e.getCurrencyById(a.currentUser.currency),a.goBack=g.goBack,"/settings/goals/add"===b.$$path?(a.currentGoal=c.initNewGoal(),a.newGoal={},a.newGoal.target="",a.newGoal.description=""):d.isBudgetSet()?(a.hasBudget=!0,a.goals=c.getAllGoals(),a.spendingStats=f.calculateAverageSpendingPerDay(),a.hasPositiveSpendingDelta=function(){return a.spendingStats.spendingDelta>0?"savings-positive":"savings-negative"}):a.hasBudget=!1,a.saveGoal=function(){c.saveCurrentGoalToCollection(a.newGoal.target,a.newGoal.description),a.goBack()},a.getGoalColorBasedOnDays=function(a){var b="goal-border";return 10>=a?b+" soon":a>10&&42>=a?b+" near":a>42?b+" far":void 0},a.removeGoal=function(){var a,b,d,e=document.getElementsByClassName("triggered-active-modal");e=e[0],d=e.dataset.goalid,c.removeGoalFromCollection(d),a=e.getAttribute("href"),b=document.querySelector(a),b.classList.toggle("active")}}),expenseTrackerAppModule.controller("expenseTracker.overviewController",function(a,b,c,d,e,f){"use strict";a.budgetChartVisible=!1,a.catChartVisible=!0,a.timeChartVisible=!1,a.categoriesList=function(){var a=e.listCategories(),b=d.getExpensesByCategory();for(var c in a)a[c].amount=b[c].value;return a}(),a.categoryColors=e.getAvailableColors(),a.getBudgetChart=function(){var b=document.getElementById("byBudgetChart"),c=b.getContext("2d");c.canvas.width=300,c.canvas.height=200,c.clearRect(0,0,b.width,b.height),a.chartBudget=new Chart(c).Line(j(),{pointDot:!1,bezierCurve:!1,scaleShowGridLines:!1}),a.budgetChartVisible=!0,a.catChartVisible=!1,a.timeChartVisible=!1},a.getWeekChart=function(){var b=document.getElementById("byTimeChart"),c=b.getContext("2d");c.canvas.width=300,c.canvas.height=200,c.clearRect(0,0,b.width,b.height),a.chartTime=new Chart(c).Line(i(),{}),a.budgetChartVisible=!1,a.catChartVisible=!1,a.timeChartVisible=!0},a.getCatChart=function(){var b=document.getElementById("byCategoryChart"),c=b.getContext("2d");c.canvas.width=300,c.canvas.height=200,c.clearRect(0,0,b.width,b.height),a.chartCategory=new Chart(c).Doughnut(h()),a.budgetChartVisible=!1,a.catChartVisible=!0,a.timeChartVisible=!1},a.weeklyTotals=d.getWeeklyTotals();var g=(new Date).getMonth();a.monthlyTotal=d.getMonthlyTotal(g),a.budget=c.getBudget();var h=function(){return d.getExpensesByCategory()},i=function(){return d.getExpensesByTime()},j=function(){return d.getExpensesByBudget()},k=$("#byCategoryChart").get(0).getContext("2d");k.width=300,k.height=200;new Chart(k);a.chartCategory=new Chart(k).Doughnut(h(),{});var l=$("#byTimeChart").get(0).getContext("2d");l.width=300,l.height=200;new Chart(l);a.chartTime=new Chart(l).Line(i(),{});var m=$("#byBudgetChart").get(0).getContext("2d");m.width=300,m.height=200;new Chart(m);a.chartBudget=new Chart(m).Line(j(),{pointDot:!1,bezierCurve:!1,scaleShowGridLines:!1}),a.userCurrency=f.getCurrencyById(c.getCurrency())}),expenseTrackerAppModule.controller("expenseTracker.settingsController",function(a,b,c,d,e,f,g){"use strict";a.currentUser=d.getCurrentUser(),a.currencies=f.getCurrenciesList(),a.userCurrency=f.getCurrencyById(a.currentUser.currency),a.goBack=g.goBack,a.setCurrency=function(b){a.userCurrency=b,d.setCurrency(b)},a.checkCurrency=function(a){return d.getCurrency()===a?"active":""},a.redirectToSettingsPage=function(){b.path("/settings")}});