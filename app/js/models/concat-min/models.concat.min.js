expenseTrackerAppModule.service("categoriesModel",function(){"use strict";var a,b=6,c=[],d={id:-1,title:"",color_id:"",icon:"",custom:null},e=[];return e.push({id:0,title:"turquoise",color_value:"#1abc9c"},{id:1,title:"green sea",color_value:"#16a085"},{id:2,title:"emerland",color_value:"#2ecc71"},{id:3,title:"nephritis",color_value:"#27ae60"},{id:4,title:"peter priver",color_value:"#3498db"},{id:5,title:"belize hole",color_value:"#2980d9"},{id:6,title:"sun flower",color_value:"#f1c40f"},{id:7,title:"orange",color_value:"#f39c12"},{id:8,title:"carrot",color_value:"#d35400"},{id:9,title:"alazarin",color_value:"#e74c3c"},{id:10,title:"pomegranate",color_value:"#c0392b"},{id:11,title:"amethyst",color_value:"#9b59b6"},{id:12,title:"grey",color_value:"#CCC"}),c.push({id:0,title:"groceries",color_id:1,icon:"fa-shopping-cart",custom:!1},{id:1,title:"eating out",color_id:6,icon:"fa-cutlery",custom:!1},{id:2,title:"coffee",color_id:8,icon:"fa-coffee",custom:!1},{id:3,title:"beer",color_id:7,icon:"fa-beer",custom:!1},{id:4,title:"cell phone",color_id:4,icon:"fa-phone",custom:!1},{id:5,title:"other",color_id:12,icon:"fa-ellipsis-h",custom:!1}),{initNewCategory:function(){return a=jQuery.extend(!0,{},d),a.id=b,b+=1,a.custom=!0,a},saveCurrentCategoryToCollection:function(){a.initial=a.title.charAt(0),c.push(a)},removeCategoryFromCollection:function(a){for(var b in c)c[b].id===parseInt(a,10)&&c.splice(c.indexOf(c[b]),1)},setCategoryColorById:function(b){a.color_id=b},getAvailableColors:function(){return e},listCategories:function(){return c},getCategoryById:function(a){for(var b in c)if(c[b].id===a)return c[b]},getCategoryColorById:function(a){for(var b in e)if(e[b].id===a)return e[b]}}}),expenseTrackerAppModule.service("currenciesModel",function(){"use strict";var a=[];return a.push({id:0,name:"Euro",sign:"€",token:"EUR",position:"right"},{id:1,name:"US Dollar",sign:"$",token:"USD",position:"left"},{id:2,name:"Swedish Kronor",sign:"kr",token:"SEK",position:"right"},{id:3,name:"Japanese Yen",sign:"¥",token:"JPY",position:"right"},{id:4,name:"British Pound",sign:"£",token:"GBP",position:"left"},{id:5,name:"Swiss Franc",sign:"SFr",token:"CHF",position:"right"},{id:6,name:"Canadian Dollar",sign:"$",token:"CAD",position:"left"},{id:7,name:"Australian Dollar",sign:"$",token:"AUD",position:"left"},{id:8,name:"New Zealand Dollar",sign:"$",token:"NZD",position:"left"},{id:9,name:"South African Rand",sign:"R",token:"ZAR",position:"right"}),{getCurrenciesList:function(){return a},getCurrencyById:function(b){for(var c in a)if(a[c].id===b)return a[c]}}}),expenseTrackerAppModule.service("expensesModel",function(a,b){"use strict";function c(a,b){for(var c=[],d=a;b>=d;d++)c.push(d);return c}function d(a,b){for(var c=[],d=a;b>=d;d++)c.push("");return c}var e,f,g=9,h=a.getAvailableColors(),i=[],j={id:-1,amount:0,time:null,date:null,location:null,description:null,category_id:null};return i.push({id:0,amount:123,time:"10:33:51 AM",date:new Date(2014,2,10),location:null,description:null,category_id:2},{id:1,amount:45,time:"11:33:51 AM",date:new Date(2014,2,10),location:null,description:null,category_id:2},{id:2,amount:301,time:"10:44:51 AM",date:new Date(2014,2,11),location:null,description:null,category_id:3},{id:3,amount:21,time:"7:33:51 AM",date:new Date(2014,2,12),location:null,description:null,category_id:1},{id:4,amount:79,time:"3:33:51 PM",date:new Date(2014,2,13),location:null,description:null,category_id:3},{id:5,amount:103,time:"8:03:51 AM",date:new Date(2014,2,15),location:null,description:null,category_id:0},{id:6,amount:73,time:"10:33:51 AM",date:new Date(2014,2,15),location:null,description:null,category_id:2},{id:7,amount:137,time:"10:33:51 AM",date:new Date(2014,2,16),location:null,description:null,category_id:4},{id:8,amount:89,time:"10:33:51 AM",date:new Date(2014,2,17),location:null,description:null,category_id:1}),Date.prototype.monthDays=function(){var a=new Date(this.getFullYear(),this.getMonth()+1,0);return a.getDate()},Date.prototype.getWeek=function(){var a=new Date;a.setFullYear(this.getFullYear(),this.getMonth(),this.getDate());var b=a.getDay();0==b&&(b=7),a.setDate(a.getDate()+(4-b));var c=a.getFullYear(),d=Math.floor((a.getTime()-new Date(c,0,1,-6))/864e5),e=1+Math.floor(d/7);return e},{initNewExpense:function(){return e=jQuery.extend(!0,{},j),e.id=g,g+=1,e},getCurrentExpense:function(){return e},getExpenses:function(){return i.reverse()},getAmount:function(){return e.amount},setAmount:function(a){e.amount=a},getCategory:function(){return e.category_id},setCategory:function(a){e.category_id=a},addExpenseToCollection:function(){i.push(e)},removeExpenseFromCollection:function(a){for(var b in i)i[b].id==a&&i.splice(i.indexOf(i[b]),1)},getExpenseById:function(a){for(var b in i)if(i[b].id==a)return i[b]},getExpensesChronologically:function(){var a=i;return a.sort(function(a,b){return b.date-a.date}),a},getExpensesByCategory:function(){var b=a.listCategories(),c=[];for(var d in b){var e=0;for(var f in i)i[f].category_id==d&&(e+=i[f].amount);c[d]={value:e,color:h[b[d].color_id].color_value}}return c},getExpensesByTime:function(){var a={labels:["Mo","Tu","We","Th","Fr","Sa","Su"],datasets:[{fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",data:this.getPreviousWeeksExpenses()},{fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",data:this.getThisWeeksExpenses()}]};return a},getExpensesByBudget:function(){var a=(new Date).getDate(),b=this.calculateAverageSpendingPerDay().optimalSpendingPerDayByBudget,e=$.map(c(1,30),function(a){return a*b}),f=this.calculateAverageSpendingPerDay().averageSpendingPerDay,g=$.map(c(1,a),function(a){return a*f}),h={labels:d(1,30),datasets:[{fillColor:"rgba(245,49,49,0.5)",strokeColor:"rgba(245,49,49,1)",pointColor:"rgba(245,49,49,1)",pointStrokeColor:"#fff",data:g},{fillColor:"rgba(151,187,205,0.3)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",data:e}]};return h},getThisWeeksExpenses:function(){var a=new Date,b=a.getWeek(),c=this.getExpenses(),d=[0,0,0,0,0,0,0];for(var e in c)if("string"==typeof c[e].date&&(c[e].date=new Date(c[e].date)),c[e].date.getWeek()==b){var f=c[e].date.getDay()-1;d[f]+=c[e].amount}return d},getPreviousWeeksExpenses:function(){var a=new Date,b=a.getWeek()-1,c=this.getExpenses(),d=[0,0,0,0,0,0,0];for(var e in c)if("string"==typeof c[e].date&&(c[e].date=new Date(c[e].date)),c[e].date.getWeek()==b){var f=c[e].date.getDay()-1;d[f]+=c[e].amount}return d},getWeeklyTotals:function(){var a=this.getThisWeeksExpenses(),b=this.getPreviousWeeksExpenses(),c=0,d=0;for(var e in a)c+=a[e],d+=b[e];return[c,d]},getMonthlyTotal:function(a){var b,c,d=0,e=this.getExpenses();for(void 0===a&&(b=new Date,a=b.getMonth()),c=0;c<e.length;c++)"string"==typeof e[c].date&&(e[c].date=new Date(e[c].date)),e[c].date.getMonth()===a&&(d+=e[c].amount);return d},calculateAverageSpendingPerDay:function(){var a=30,c=b.getBudget();i.sort(function(a,b){return new Date(b.date)-new Date(a.date)});var d=new Date;d.setMonth(d.getMonth()-1);for(var e=0,g=0;a>g;g++)void 0!==i[g]&&i[g].date>d&&(e+=i[g].amount);var h=Math.ceil(e/a),j=Math.ceil(c/a),k=j-h;return f={spendingDelta:k,averageSpendingPerDay:h,optimalSpendingPerDayByBudget:j}},getAverageSpendingPerDay:function(){return f.averageSpendingPerDay},getOptimalSpendingPerDayByBudget:function(){return f.optimalSpendingPerDayByBudget},getSavingsPerDay:function(){return f.spendingDelta}}}),expenseTrackerAppModule.service("goalsModel",function(a){"use strict";var b,c=0,d=[],e={id:-1,target:"",description:""};return{initNewGoal:function(){return b=jQuery.extend(!0,{},e),b.id=c,c+=1,b},saveCurrentGoalToCollection:function(a,c){b.target=a,b.description=c,d.push(b)},removeGoalFromCollection:function(a){for(var b in d)d[b].id===parseInt(a,10)&&d.splice(d.indexOf(d[b]),1)},calculateDaysUntilGoalIsReached:function(a,b){var c=Math.floor(a/b);return c},getAllGoals:function(){var b=a.calculateAverageSpendingPerDay();for(var c in d)d[c].daysUntilGoalIsReached=this.calculateDaysUntilGoalIsReached(d[c].target,b.spendingDelta);return d.sort(function(a,b){return a.daysUntilGoalIsReached-b.daysUntilGoalIsReached}),d}}}),expenseTrackerAppModule.service("knobModel",function(a){"use strict";var b,c,d,e,f,g=new Date,h=function(a){b=0,d=0,e=0,g=new Date,f=a},i=function(){b++,k()},j=function(){0!==a.getAmount()&&(b--,k())},k=function(){var c=b;f.html(c),a.setAmount(c)},l=function(){c>this.cv?d?(j(),d=0):(d=1,e=0):c<this.cv&&(e?(i(),e=0):(e=1,d=0)),c=this.cv};return{initialize:function(a){h(a),$(".infinite").knob({min:0,max:30,width:230,height:230,stopper:!1,cursor:30,inline:!1,fgColor:"#0fb2be",bgColor:"#e6e6e7",displayInput:!1,change:l})}}}),expenseTrackerAppModule.service("navigationService",function(){"use strict";return{goBack:function(){window.history.back()}}}),expenseTrackerAppModule.service("userModel",function(){"use strict";var a={firstName:"",lastName:"",eMailAddress:"",budget:0,token:"",currency:2};return{getCurrentUser:function(){return a},getFirstName:function(){return a.firstName},setFirstName:function(b){a.firstName=b},getLastName:function(){return a.lastName},setLastName:function(b){a.lastName=b},getEMailAddress:function(){return a.eMailAddress},setEMailAddress:function(b){a.eMailAddress=b},getBudget:function(){return a.budget},setBudget:function(b){a.budget=b},isBudgetSet:function(){return 0!==a.budget},getCurrency:function(){return a.currency},setCurrency:function(b){a.currency=b}}});